{% extends "base.html" %}

{% load static %}
{% load multiply %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/pago_exitoso.css' %}">
<title>Pago Exitoso</title>
{% endblock %}

{% block body %}
<div class="boleta-container">
    <h1>¡Pago Exitoso!</h1>
    <h2>Boleta de Compra</h2>
    <p><strong>Usuario:</strong> {{ usuario.username }}</p>
    <p><strong>Correo Electrónico:</strong> {{ usuario.email }}</p>
    <p><strong>Fecha:</strong> {{ ahora }}</p>
    <table class="boleta-table">
        <thead>
            <tr>
                <th>Producto</th>
                <th>Cantidad</th>
                <th>Precio Unitario</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
            {% for item in carrito %}
            <tr>
                <td>{{ item.producto.nombre }}</td>
                <td>{{ item.cantidad }}</td>
                <td>{{ item.producto.precio }} CLP</td>
                <td>{{ item.producto.precio|multiply:item.cantidad }} CLP</td>
            </tr>
            {% endfor %}
            <tr>
                <td colspan="3"><strong>Total</strong></td>
                <td><strong>{{ total_precio }} CLP</strong></td>
            </tr>
        </tbody>
    </table>
</div>
{% endblock %}

{% block script %}
<script>
    // Aquí puedes agregar cualquier script necesario
</script>
{% endblock %}

<style>
.boleta-container {
    width: 80%;
    margin: 0 auto;
    text-align: center;
    padding: 20px;
    background: #f9f9f9;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

.boleta-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}

.boleta-table th, .boleta-table td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: left;
}

.boleta-table th {
    background-color: #f2f2f2;
}

.boleta-table td {
    background-color: #fff;
}
</style>
